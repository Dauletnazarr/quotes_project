{% extends 'base.html' %}
{% block title %}–°–ª—É—á–∞–π–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞{% endblock %}
{% block content %}
  <h1>–°–ª—É—á–∞–π–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞</h1>
  {% if quote %}
  <div class="card">
    <blockquote style="font-size:1.2rem; line-height:1.5">
      ‚Äú{{ quote.text|linebreaksbr }}‚Äù
    </blockquote>
    <div class="muted">–ò—Å—Ç–æ—á–Ω–∏–∫: {{ quote.source.name }} (–≤–µ—Å: {{ quote.weight }})</div>
    <div class="row" style="margin-top:12px">
      <button onclick="vote('{{ quote.pk }}','like')">üëç –ù—Ä–∞–≤–∏—Ç—Å—è <span id="likes">{{ quote.likes }}</span></button>
      <button onclick="vote('{{ quote.pk }}','dislike')">üëé –ù–µ –Ω—Ä–∞–≤–∏—Ç—Å—è <span id="dislikes">{{ quote.dislikes }}</span></button>
      <span class="muted">–ü—Ä–æ—Å–º–æ—Ç—Ä—ã: {{ quote.views }}</span>
      <a href="{% url 'quotes:random' %}" style="margin-left:auto">–ï—â—ë —Ü–∏—Ç–∞—Ç—É ‚Üª</a>
    </div>
  </div>
  {% else %}
    <p>–¶–∏—Ç–∞—Ç –ø–æ–∫–∞ –Ω–µ—Ç. <a href="{% url 'quotes:add' %}">–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—É—é</a>.</p>
  {% endif %}
{% endblock %}
{% block scripts %}
<script>
  async function vote(id, kind) {
    const url = `/${id}/${kind}/`;
    const data = await postJSON(url);
    if (data.likes !== undefined) document.getElementById('likes').innerText = data.likes;
    if (data.dislikes !== undefined) document.getElementById('dislikes').innerText = data.dislikes;
  }
</script>
{% endblock %}
